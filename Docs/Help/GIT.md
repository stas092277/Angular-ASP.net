#Базовые навыки работы с git
##Что есть git? 
**[ДОКУМЕНТАЦИЯ](https://git-scm.com/doc)**  
Опуская [технические детали](https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F), GIT - распределенная система контроля версий, представленная репозиторием (специальным хранилищем файлов) на диске. Визуализируется с помощью графа с тремя основыми элементами:  
1. Commit - вершина графа, содержащая информацию о версии проекта в момент сохранения. Каждый коммит обладает уникальным идентификатором - хэшем, данными об авторе, комментарием и идентификатором на предыдущий коммита.
1. Связи, которые всегда направлены в сторону одной или двух предыдущих версий.
1. Указатели на определенную версию проекта. Указателями являются ветви `branch`, тэги `tag` и особый указатель `HEAD`, который указывает на текущую рассматриваемую версию проекта.

Для модификации проекта используются две "директории" working и staging. Непосредственные изменения и работа производится в working directory. Измененные файлы, которые должны войти в сохраняемый commit должны предварительно быть перемещены из working в staging directory. Файлы в staging directory зафиксированы по версии. Если вы хотите добавить новые изменения, следует переместить файл туда повторно.

##Основные команды
Команды выполняются из корня репозитория через командный интерфейс (например `cmd` или `git bash`).
`git init` - инициализация локального репозитория.  
`git status` - показывает разницу между HEAD и staging директорий, staging directory и последним коммитом.  
`git remote add <remote_name> <url>` - подключение удаленного репозитория.  
`git fetch <remote_name> --prune` - получить обновленную историю удаленного репозитория. Флаг `--prune` удаляет у вашего ремоута ветки, которые перестали существовать в удаленном репозитории. Альтернативно, можно использовать команду `git pull`, которя последовательно выполнит команды `git fetch` и `git merge`.   
`git branch <branch_name>` - создание нового указателя на ветку.  
`git checkout <branch_name>` - перенос указателя head на отслеживание определенной ветки. Вместо названия ветки можно использовать хэш коммита, для перехода на конкретный коммит. Флаг `-b` приведет к выполнению команды `git branch` с последующим выполнением `git checkout` на созданную ветку.  
`git add <file_name(s)>` - добавление файлов из working в staging directory. Для добавления сразу всех файлов используйте `git add .`.  
`git commit` - создание нового коммита в текущей ветке на основе содержимого staging directory.  
`git merge <branch_name>` - выполнить попытку обновления истории изменений текущей ветки, изменениями ветки указанной в команде. Если существует прямой путь до новой версии - будет выполнена т.н. "перемотка" - указатель текущей ветки переместится на последнюю версию указанной в команде ветки. Если же прямого пути не существует, будет создан новый коммит со ссылками на обоих предков и указатель текущей ветки будет перемещен на него. Перемотка зачастую является нежелательной стратегией, поэтому часто к команде добавляют флаг `--no-ff`. Пример: `git merge develop --no-ff`  
`git reset <commit_hash> --hard` - откат истории изменений текущей ветки на указанный коммит. Вместо `<commit_hash>` можно использовать кострукцию `HEAD~X`, которая позволяет откатить текущую ветку на `X` коммитов назад. Обратите внимание, что если вы откатываете историю изменений, при отсутствии на коммите указателя, к нему, скорее всего, вернуться уже неполучится.  
`git cherry-pick <commit_hash>` - взять изменения указанного коммита(ов) и по очереди применить их к текущему указателю HEAD. Необходимо отсутствие изменений в working directory.  
`git push <remote_name>` - отправка текущей ветки в подключенный удаленный репозиторий. Если в удаленном репозитории еще нет вашей ветви, следует также использовать флаг `--set-upstream`.  
Подробнее о командах и опциях можете прочесть в **[ДОКУМЕНТАЦИИ](https://git-scm.com/doc)**  


##Инициализация репозитория
1. Создать новую папку на диске.  
1. Открыть в ней git bash или cmd (pro tip: в проводнике в строке адреса можно написать git bash или cmd).  
1. Выполнить `git init` из этой папки.  
1. Выполнить `git remote add <remote_name> <url>` для добавления удаленного репозитория (скорее всего это будет ваш репозиторий с проектом)  

##Работа с git в Visual Studio
**[Quickstart](https://docs.microsoft.com/en-us/azure/devops/repos/git/share-your-code-in-git-vs-2017?view=azure-devops)**  
**[Tutorials](https://docs.microsoft.com/en-us/azure/devops/repos/git/gitworkflow?view=tfs-2017)**  

##Выполнение merge
**[Merge в visual studio](https://docs.microsoft.com/en-us/azure/devops/repos/git/merging?view=tfs-2017&tabs=visual-studio)**  
В случае, если "перемотка" является недоступной для данного мерджа стратегией, то существует вероятность изменения одних и тех же частей файла в обеих ветвях. В таком случае может возникнуть конфликт слияния, который необходимо разрешить.  
В файле конфликт проявляется как запись вида:  
```
<<<<<<< develop  
  puts 'hola world'    
=======  
  puts 'hello mundo'  
>>>>>> feature/your_feature  
```
В данном случае, над `======` находятся правки версии develop, под чертой - версии featur/your_feature. После удаления синтаксиса << == >> и сохранения файла будет принято то, что в нем останется. Обычно - конфликт решается выбором правильного блока из предложенных, однако случаи бывают разные.  
Для продолжения merge после правки конфликта (если он не продолжился автоматически) следует Выполнить команду `git merge --continue`. В случае, если она не сработала, сделайте `git add .`, `git commit`, после чего вам предложат ввести комментарий для вашего мерджа.  

##.gitignore
При работе с проектом может возникнуть необходимость игнорировать некоторые файлы или папки, которые не нужны в истории изменений. Например, output директории билдов явно не понадобятся вашим коллегам.  
Для исключения файлов существуют файлы .gitignore, которые позволяют исключать как конкретные файлы, так и файлы по определенной маске. В одном репозитории может содержаться несколько файлов .gitignore.  
Подробнее:  
**[ДОКУМЕНТАЦИЯ](https://git-scm.com/doc)**  
**[.gitignore через Visual Studio](https://docs.microsoft.com/en-us/azure/devops/repos/git/ignore-files?view=azure-devops&tabs=visual-studio)**  

##Полезные ссылки
**[Quickstarts](https://docs.microsoft.com/en-us/azure/devops/repos/git/share-your-code-in-git-vs-2017?view=tfs-2017)**  
**[Tutorials](https://docs.microsoft.com/en-us/azure/devops/repos/git/gitworkflow?view=tfs-2017)**  
**[Concepts](https://docs.microsoft.com/en-us/azure/devops/repos/git/history?view=tfs-2017)**  
**[How-to Guides](https://docs.microsoft.com/en-us/azure/devops/repos/git/git-tags?view=tfs-2017)**  